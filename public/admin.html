<!DOCTYPE html>
<html>
<head>
  <title>Admin Upload | Himanshu</title>
  <style>
    body { font-family: Arial; background:#0b0b0b; color:#fff; text-align:center; padding:40px; }
    .card { max-width:520px; margin:0 auto; background:#151515; padding:24px; border-radius:14px; }
    input, button { width:100%; padding:12px; margin:10px 0; border-radius:10px; border:none; }
    input { background:#fff; color:#000; }
    button { background:#fff; color:#000; font-weight:bold; cursor:pointer; }
    button:hover { background:#ddd; }
    .msg { margin-top:14px; color:#9fe8a8; word-break:break-all; }
    a { color:#7dd3fc; }
  </style>
</head>
<body>
  <h1>Admin Upload</h1>

  <div class="card">
    <p>Select an image and upload it to Azure Blob Storage.</p>

    <input id="file" type="file" accept="image/*" />
    <button onclick="upload()">Upload</button>

    <div class="msg" id="msg"></div>
  </div>

  <script>
    async function upload(){
      const fileInput = document.getElementById("file");
      const msg = document.getElementById("msg");
      msg.textContent = "";

      if(!fileInput.files.length){
        msg.textContent = "Please select a file first.";
        return;
      }

      const formData = new FormData();
      formData.append("photo", fileInput.files[0]);

      try{
        const res = await fetch("/api/upload", { method:"POST", body: formData });
        const data = await res.json();

        if(!res.ok){
          msg.textContent = data.error || "Upload failed.";
          return;
        }

        msg.innerHTML = `âœ… Uploaded!<br>File: ${data.name}<br><a href="${data.url}" target="_blank">Open image</a>`;
      }catch(e){
        msg.textContent = "Upload failed (network or server error).";
      }
    }
  </script>
</body>
</html>
